<div class="settings-overlay" *ngIf="settings">
  <div class="settings-container">
    <div class="settings-header">
      <button class="btn-close-modal" (click)="closeSettings()">âœ•</button>
      <h2 class="settings-title">
        âš™ï¸ {{ translationService.translate("settings.title") }}
      </h2>
      <p class="settings-subtitle">
        {{ translationService.translate("settings.subtitle") }}
      </p>
    </div>

    <div class="settings-content">
      <!-- Language Settings -->
      <div class="settings-section">
        <h3 class="section-title">
          <span class="icon">ğŸŒ</span>
          {{ translationService.translate("settings.language.title") }}
        </h3>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              {{ translationService.translate("settings.language.label") }}
            </div>
          </div>
          <div class="language-selector">
            <button
              class="language-button"
              [class.active]="currentLanguage === 'en'"
              (click)="changeLanguage('en')"
            >
              ğŸ‡¬ğŸ‡§ {{ translationService.translate("settings.language.english") }}
            </button>
            <button
              class="language-button"
              [class.active]="currentLanguage === 'es'"
              (click)="changeLanguage('es')"
            >
              ğŸ‡ªğŸ‡¸ {{ translationService.translate("settings.language.spanish") }}
            </button>
          </div>
        </div>
      </div>

      <!-- Audio Settings -->
      <div class="settings-section">
        <h3 class="section-title">
          <span class="icon">ğŸ”Š</span>
          {{ translationService.translate("settings.audio.title") }}
        </h3>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              {{ translationService.translate("settings.audio.masterVolume") }}
            </div>
            <div class="label-description">
              {{ translationService.translate("settings.audio.masterVolume") }}
            </div>
          </div>
          <div class="volume-control">
            <input
              type="range"
              min="0"
              max="100"
              [(ngModel)]="settings.masterVolume"
              (change)="updateSetting('masterVolume', settings.masterVolume)"
              class="volume-slider"
            />
            <span class="volume-value">{{ settings.masterVolume }}%</span>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              {{ translationService.translate("settings.audio.musicVolume") }}
            </div>
            <div class="label-description">
              {{ translationService.translate("settings.audio.musicVolume") }}
            </div>
          </div>
          <div class="volume-control">
            <input
              type="range"
              min="0"
              max="100"
              [(ngModel)]="settings.musicVolume"
              (change)="updateSetting('musicVolume', settings.musicVolume)"
              class="volume-slider"
              [disabled]="!settings.musicEnabled"
            />
            <span class="volume-value">{{ settings.musicVolume }}%</span>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              {{ translationService.translate("settings.audio.sfxVolume") }}
            </div>
            <div class="label-description">
              {{ translationService.translate("settings.audio.sfxVolume") }}
            </div>
          </div>
          <div class="volume-control">
            <input
              type="range"
              min="0"
              max="100"
              [(ngModel)]="settings.sfxVolume"
              (change)="updateSetting('sfxVolume', settings.sfxVolume)"
              class="volume-slider"
              [disabled]="!settings.sfxEnabled"
            />
            <span class="volume-value">{{ settings.sfxVolume }}%</span>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              ğŸµ
              {{ translationService.translate("settings.audio.musicEnabled") }}
            </div>
            <div class="label-description">
              {{ translationService.translate("settings.audio.musicDesc") }}
            </div>
          </div>
          <label class="toggle-switch">
            <input
              type="checkbox"
              class="toggle-input"
              [(ngModel)]="settings.musicEnabled"
              (change)="updateSetting('musicEnabled', settings.musicEnabled)"
            />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              ğŸ”Š {{ translationService.translate("settings.audio.sfxEnabled") }}
            </div>
            <div class="label-description">
              {{ translationService.translate("settings.audio.sfxDesc") }}
            </div>
          </div>
          <label class="toggle-switch">
            <input
              type="checkbox"
              class="toggle-input"
              [(ngModel)]="settings.sfxEnabled"
              (change)="updateSetting('sfxEnabled', settings.sfxEnabled)"
            />
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Difficulty - Comentado porque el juego tiene dificultad progresiva interna -->
      <!-- <div class="settings-section">
        <h3 class="section-title">
          <span class="icon">âš”ï¸</span>
          {{ translationService.translate("settings.difficulty.title") }}
        </h3>
        <div class="difficulty-selector">
          <button
            *ngFor="let diff of difficultyOptions"
            class="difficulty-button"
            [class.active]="settings.difficulty === diff.value"
            (click)="updateSetting('difficulty', diff.value)"
          >
            {{ diff.label }}
          </button>
        </div>
      </div> -->

      <!-- Visual Effects -->
      <div class="settings-section">
        <h3 class="section-title">
          <span class="icon">ğŸ¨</span>
          {{ translationService.translate("settings.visual.title") }}
        </h3>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              âœ¨ {{ translationService.translate("settings.visual.particles") }}
            </div>
            <div class="label-description">
              {{
                translationService.translate("settings.visual.particlesDesc")
              }}
            </div>
          </div>
          <label class="toggle-switch">
            <input
              type="checkbox"
              class="toggle-input"
              [(ngModel)]="settings.particlesEnabled"
              (change)="
                updateSetting('particlesEnabled', settings.particlesEnabled)
              "
            />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              ğŸŒˆ {{ translationService.translate("settings.visual.chromatic") }}
            </div>
            <div class="label-description">
              {{
                translationService.translate("settings.visual.chromaticDesc")
              }}
            </div>
          </div>
          <label class="toggle-switch">
            <input
              type="checkbox"
              class="toggle-input"
              [(ngModel)]="settings.chromaticAberrationEnabled"
              (change)="
                updateSetting(
                  'chromaticAberrationEnabled',
                  settings.chromaticAberrationEnabled
                )
              "
            />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              ğŸ’¥
              {{ translationService.translate("settings.visual.screenShake") }}
            </div>
            <div class="label-description">
              {{
                translationService.translate("settings.visual.screenShakeDesc")
              }}
            </div>
          </div>
          <label class="toggle-switch">
            <input
              type="checkbox"
              class="toggle-input"
              [(ngModel)]="settings.screenShakeEnabled"
              (change)="
                updateSetting('screenShakeEnabled', settings.screenShakeEnabled)
              "
            />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              ğŸ‘¾ {{ translationService.translate("settings.visual.glitch") }}
            </div>
            <div class="label-description">
              {{ translationService.translate("settings.visual.glitchDesc") }}
            </div>
          </div>
          <label class="toggle-switch">
            <input
              type="checkbox"
              class="toggle-input"
              [(ngModel)]="settings.glitchEffectEnabled"
              (change)="
                updateSetting(
                  'glitchEffectEnabled',
                  settings.glitchEffectEnabled
                )
              "
            />
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Accessibility -->
      <div class="settings-section">
        <h3 class="section-title">
          <span class="icon">â™¿</span>
          {{ translationService.translate("settings.accessibility.title") }}
        </h3>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              ğŸ”†
              {{
                translationService.translate(
                  "settings.accessibility.highContrast"
                )
              }}
            </div>
            <div class="label-description">
              {{
                translationService.translate(
                  "settings.accessibility.highContrastDesc"
                )
              }}
            </div>
          </div>
          <label class="toggle-switch">
            <input
              type="checkbox"
              class="toggle-input"
              [(ngModel)]="settings.highContrast"
              (change)="updateSetting('highContrast', settings.highContrast)"
            />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              ğŸŒ
              {{
                translationService.translate(
                  "settings.accessibility.reducedMotion"
                )
              }}
            </div>
            <div class="label-description">
              {{
                translationService.translate(
                  "settings.accessibility.reducedMotionDesc"
                )
              }}
            </div>
          </div>
          <label class="toggle-switch">
            <input
              type="checkbox"
              class="toggle-input"
              [(ngModel)]="settings.reducedMotion"
              (change)="updateSetting('reducedMotion', settings.reducedMotion)"
            />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-label">
            <div class="label-title">
              ğŸ¯
              {{
                translationService.translate(
                  "settings.accessibility.showTutorial"
                )
              }}
            </div>
            <div class="label-description">
              {{
                translationService.translate(
                  "settings.accessibility.showTutorialDesc"
                )
              }}
            </div>
          </div>
          <label class="toggle-switch">
            <input
              type="checkbox"
              class="toggle-input"
              [(ngModel)]="settings.showTutorial"
              (change)="updateSetting('showTutorial', settings.showTutorial)"
            />
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Reset Button -->
      <div class="actions">
        <button class="btn-reset" (click)="resetToDefaults()">
          ğŸ”„ {{ translationService.translate("common.reset") }}
        </button>
      </div>
    </div>
  </div>
</div>
